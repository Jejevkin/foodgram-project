<!doctype html>
<html lang="en">
<head>
    {% load static %}
    {% load custom_filters %}
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Рецепты</title>
    <link rel="stylesheet" href="{% static 'pages/index.css' %}">
</head>
<body class="body">
<header class="header">
    {% include 'nav.html' %}
</header>
<main class="main container">
    <div class="main__header">
        <h1 class="main__title">{{ author.get_full_name|default:author.username }}</h1>
        <ul class="tags">
            {% for tag in all_tags|all_tags %}
                <li class="tags__item">
                    <a id="{{ tags.slug }}" class="tags__checkbox tags__checkbox_style_{{ tag.color }}
                        {% if tag.slug in request.GET|get_active_tags %} tags__checkbox_active {% endif %}"
                       href="{% url 'profile' author.username %}?{{ request|change_tag_link:tag }}"></a><span
                        class="tags__label">{{ tag.title }}</span>
                </li>
            {% endfor %}
        </ul>

    </div>

    <div class="author-subscribe" data-author="{{ author.id}}">
        {% if request.user.is_authenticated and request.user != author %}
            {% if author|is_subscribe:user %}
                <button class="button button_style_light-blue button_size_auto" name="subscribe">
                    <span class="icon-check button__icon"></span>Отписаться от автора
                </button></p>
            {% else %}

                <p style="padding: 0 0 2em 0;">
                    <button class="button button_style_light-blue button_size_auto"
                            name="subscribe" data-out>Подписаться на автора
                    </button>
                </p>
            {% endif %}
        {% endif %}
    </div>
    {#    <!--        <p style="padding: 0 0 2em 0;"><a class="button button_style_light-blue" href="#">Подписаться на автора</a></p>-->#}
    {#    {% if user.is_authenticated %}#}
    {#        {% if recipe.author|is_subscribe:request.user %}#}
    {#            <div class="author-subscribe" data-author="{{ recipe.author.id }}">#}
    {#                <p style="padding: 0 0 2em 0;">#}
    {#                    <button class="button button_style_light-blue-outline button_size_subscribe" name="subscribe">#}
    {#                        Отписаться#}
    {#                        от автора#}
    {#                    </button>#}
    {#                </p>#}
    {#            </div>#}
    {#            <button class="button button_style_none" name="subscribe"><span#}
    {#                    class="icon-favorite icon-favorite_big icon-favorite_active"></span></button>#}
    {#        {% else %}#}
    {#            <div class="author-subscribe" data-author="{{ recipe.author.id }}">#}
    {#                <p style="padding: 0 0 2em 0;">#}
    {#                    <button class="button button_style_light-blue button_size_subscribe" name="subscribe" data-out>#}
    {#                        Подписаться#}
    {#                        на автора#}
    {#                    </button>#}
    {#                </p>#}
    {#            </div>#}
    {#            <button class="button button_style_none" name="subscribe" data-out><span#}
    {#                    class="icon-favorite icon-favorite_big"></span></button>#}
    {#        {% endif %}#}
    {#        <div class="single-card__favorite-tooltip tooltip">Добавить в избранное</div>#}
    {#                    <button class="button button_style_none" name="favorites" data-out><span#}
    {#                            class="icon-favorite icon-favorite_big"></span></button>#}
    {##}
    {#    {% endif %}#}
    {#    <div class="author-subscribe" data-author="323">#}
    {#        <p style="padding: 0 0 2em 0;">#}
    {#            <button class="button button_style_light-blue button_size_subscribe" name="subscribe" data-out>Подписаться#}
    {#                на автора#}
    {#            </button>#}
    {#        </p>#}
    {#    </div>#}
    <div class="card-list">
        {% for recipe in page %}
            {% include 'recipes/recipe.html' %}
        {% endfor %}
    </div>
    {% include 'paginator.html' with items=page paginator=paginator %}
    {#    <nav class="pagination" aria-label="Search results pages">#}
    {#        <ul class="pagination__container">#}
    {#            <li class="pagination__item"><a class="pagination__link link" href="#"><span class="icon-left"></span></a>#}
    {#            </li>#}
    {#            <li class="pagination__item pagination__item_active"><a class="pagination__link link" href="#">1</a></li>#}
    {#            <li class="pagination__item"><a class="pagination__link link" href="#">2</a></li>#}
    {#            <li class="pagination__item"><a class="pagination__link link" href="#">3</a></li>#}
    {#            <li class="pagination__item"><a class="pagination__link link" href="#">4</a></li>#}
    {#            <li class="pagination__item"><a class="pagination__link link" href="#">5</a></li>#}
    {#            <li class="pagination__item"><a class="pagination__link link" href="#"><span class="icon-right"></span></a>#}
    {#            </li>#}
    {#        </ul>#}
    {#    </nav>#}
</main>
<footer class="footer">
    <div class="footer__container container">
        <a href="#" class="footer__brand link">Продуктовый помощник</a>
        <ul class="footer__items">
            <li class="footer__item"><a href="#" class="footer__link link">Об авторе </a></li>
            <li class="footer__item"><a href="#" class="footer__link link">Технологии</a></li>
        </ul>
    </div>
</footer>
<script src="{% static 'js/components/MainCards.js' %}"></script>

<script src="{% static 'js/components/Purchases.js' %}"></script>
<script src="{% static 'js/components/Favorites.js' %}"></script>
<script src="{% static 'js/components/Subscribe.js' %}"></script>

<script src="{% static 'js/config/config.js' %}"></script>
<script src="{% static 'js/components/AuthorRecipe.js' %}"></script>
<script src="{% static 'js/components/Header.js' %}"></script>

<script src="{% static 'js/api/Api.js' %}"></script>
<script src="{% static 'authorRecipe.js' %}"></script>
</body>
</html>
